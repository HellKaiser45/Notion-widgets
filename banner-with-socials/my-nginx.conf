server {
    listen 80;
    listen [::]:80;
    root /var/www/html;
    index index.html;
    server_name ${SITE_ORIGIN};

    location = / {
        # Only redirect if not from an iframe
        if ($http_referer = "") {
            return 301 /ui;
        }
        try_files $uri $uri/ =404;
    }

    location / {
        # Preserve existing try_files behavior for other paths
        try_files $uri $uri/ =404;
    }
}
